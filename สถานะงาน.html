<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MTC 36th Anniversary Dashboard (Fixed & Stable)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Kanit', sans-serif;
            background-color: #f1f5f9;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .progress-bar {
            transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .urgent-glow {
            box-shadow: 0 0 25px rgba(220, 38, 38, 0.5);
            animation: pulse-urgent 2s infinite;
        }
        @keyframes pulse-urgent {
            0%, 100% { transform: scale(1); box-shadow: 0 0 20px rgba(220, 38, 38, 0.4); }
            50% { transform: scale(1.02); box-shadow: 0 0 35px rgba(220, 38, 38, 0.7); }
        }
        .shake-icon {
            animation: shake-anim 2s infinite;
        }
        @keyframes shake-anim {
            0%, 100% { transform: rotate(0); }
            10%, 30%, 50%, 70%, 90% { transform: rotate(-5deg); }
            20%, 40%, 60%, 80% { transform: rotate(5deg); }
        }
        pre {
            background: #0f172a;
            color: #10b981;
            padding: 1.25rem;
            border-radius: 1rem;
            font-family: 'Courier New', monospace;
            font-size: 0.7rem;
            max-height: 250px;
            overflow-y: auto;
            border: 1px solid #1e293b;
        }
    </style>
</head>
<body class="pb-12">

    <!-- Header -->
    <header class="bg-indigo-950 text-white shadow-2xl sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <div class="bg-white p-2 rounded-xl shadow-inner">
                    <i class="fas fa-satellite-dish text-indigo-900 text-2xl"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold tracking-tight uppercase">MTC 36th ANNIVERSARY</h1>
                    <p class="text-[10px] text-indigo-300 uppercase tracking-widest font-light italic text-nowrap">Dashboard ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤ (‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£)</p>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <div class="text-right hidden sm:block border-r border-indigo-800 pr-4">
                    <p class="text-[10px] text-indigo-400 font-bold uppercase tracking-tighter">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÇ‡∏´‡∏°‡∏î</p>
                    <p id="mode-display" class="text-sm font-medium">‡∏°‡∏∏‡∏°‡∏°‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏≤</p>
                </div>
                <button onclick="toggleAdmin()" id="btn-admin" class="bg-indigo-600 hover:bg-indigo-500 text-white px-5 py-2.5 rounded-xl transition-all shadow-lg active:scale-95 flex items-center font-bold">
                    <i class="fas fa-database mr-2"></i> ‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà
                </button>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 mt-8">

        <!-- Admin Portal -->
        <section id="admin-panel" class="hidden mb-10 transition-all duration-500">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Update Form -->
                <div class="lg:col-span-2 bg-white p-8 rounded-3xl shadow-2xl border-2 border-indigo-500 relative">
                    <div class="flex items-center justify-between mb-8 border-b pb-4">
                        <h2 class="text-2xl font-bold text-indigo-900 flex items-center">
                            <i class="fas fa-edit mr-3"></i> ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
                        </h2>
                        <button onclick="resetToDefaults()" class="text-xs text-red-600 hover:underline font-bold bg-red-50 px-3 py-1 rounded-full">
                            <i class="fas fa-undo mr-1"></i> ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                        </button>
                    </div>
                    
                    <form id="updateForm" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-2">
                            <label class="block text-sm font-bold text-gray-700">‡∏¢‡∏≠‡∏î YouTube Subs (‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô)</label>
                            <input type="number" id="in-yt" class="w-full border-2 border-gray-100 rounded-2xl p-3 focus:border-indigo-500 focus:outline-none transition-colors font-bold text-indigo-600 shadow-inner">
                        </div>
                        <div class="space-y-2">
                            <label class="block text-sm font-bold text-gray-700">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (‡∏õ‡∏•‡∏≤‡πÄ‡∏´‡πá‡∏î)</label>
                            <select id="in-food" class="w-full border-2 border-gray-100 rounded-2xl p-3 focus:border-indigo-500 focus:outline-none transition-colors font-medium">
                                <option value="waiting">üî¥ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ô‡πÅ‡∏°‡πà‡∏Ñ‡∏£‡∏±‡∏ß</option>
                                <option value="ongoing">üîµ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ô‡∏á‡∏≤‡∏ô</option>
                                <option value="done">üü¢ ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß</option>
                            </select>
                        </div>
                        <div class="space-y-2">
                            <label class="block text-sm font-bold text-gray-700">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏°‡∏∑‡∏≠‡∏™‡∏≠‡∏á</label>
                            <select id="in-secondhand" class="w-full border-2 border-gray-100 rounded-2xl p-3 focus:border-indigo-500 focus:outline-none transition-colors font-medium">
                                <option value="waiting">üî¥ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á</option>
                                <option value="ongoing">üîµ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏±‡∏ö‡∏ù‡∏≤‡∏Å/‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ</option>
                                <option value="done">üü¢ ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</option>
                            </select>
                        </div>
                        <div class="space-y-2">
                            <label class="block text-sm font-bold text-gray-700">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ AI ‡∏ô‡πâ‡∏≠‡∏á‡∏à‡∏≤‡∏ô‡∏î‡∏≤‡∏ß</label>
                            <select id="in-ai" class="w-full border-2 border-gray-100 rounded-2xl p-3 focus:border-indigo-500 focus:outline-none transition-colors font-medium">
                                <option value="ongoing">üîµ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</option>
                                <option value="done">üü¢ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</option>
                            </select>
                        </div>
                        <div class="space-y-2">
                            <label class="block text-sm font-bold text-gray-700">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏ö‡∏™‡∏•‡∏≤‡∏Å</label>
                            <select id="in-lucky" class="w-full border-2 border-gray-100 rounded-2xl p-3 focus:border-indigo-500 focus:outline-none transition-colors font-medium">
                                <option value="waiting">üü† ‡∏£‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å ‡∏Å‡∏ò‡∏Å.</option>
                                <option value="ongoing">üîµ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤</option>
                                <option value="done">üü¢ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</option>
                            </select>
                        </div>
                        <div class="space-y-2">
                            <label class="block text-sm font-bold text-gray-700">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï‡∏û‡∏ß‡∏á‡∏Å‡∏∏‡∏ç‡πÅ‡∏à</label>
                            <input type="range" id="in-keyring-prog" class="w-full h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-600 shadow-inner" min="0" max="100">
                            <div class="text-right text-xs font-bold text-indigo-600 mt-1"><span id="in-keyring-val">60</span>%</div>
                        </div>
                        <div class="md:col-span-2 pt-4">
                            <button type="button" onclick="saveAndSync()" class="w-full bg-indigo-700 text-white font-bold py-4 rounded-2xl hover:bg-indigo-800 transition shadow-xl flex items-center justify-center text-xl active:scale-95">
                                <i class="fas fa-save mr-3"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Dashboard
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Database Inspector -->
                <div class="bg-slate-900 p-8 rounded-3xl shadow-2xl border-2 border-slate-700">
                    <h3 class="text-white font-bold mb-4 flex items-center text-sm uppercase tracking-widest">
                        <i class="fas fa-database mr-2 text-emerald-400"></i> Local DB Snapshot
                    </h3>
                    <pre id="raw-json-viewer">{ "Status": "Ready" }</pre>
                    <div class="mt-6 p-4 bg-slate-800 rounded-2xl border border-slate-700 shadow-inner">
                        <p class="text-[10px] text-slate-400 leading-relaxed italic">
                            * ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡πÅ‡∏ö‡∏ö‡∏ñ‡∏≤‡∏ß‡∏£ <br>
                            * ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏£‡∏ß‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô <br>
                        </p>
                        <p id="last-saved-time" class="text-[10px] text-emerald-400 mt-3 font-bold uppercase tracking-tight italic">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dashboard Statistics -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-10 text-center">
            <!-- Overall Progress -->
            <div class="glass-card p-6 rounded-3xl shadow-sm border-t-4 border-indigo-600">
                <h3 class="text-gray-500 text-xs mb-1 font-medium italic tracking-tight uppercase">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏ß‡∏°</h3>
                <p id="display-progress" class="text-3xl font-bold text-gray-800 tracking-tight">0%</p>
                <div class="w-full bg-gray-100 h-2.5 rounded-full mt-4 overflow-hidden shadow-inner">
                    <div id="bar-progress" class="progress-bar bg-indigo-600 h-full w-0 rounded-full"></div>
                </div>
            </div>

            <!-- YouTube Subs -->
            <div class="glass-card p-6 rounded-3xl shadow-sm border-t-4 border-red-600">
                <h3 class="text-gray-500 text-xs mb-1 font-medium italic tracking-tight uppercase">‡∏¢‡∏≠‡∏î YouTube Subs</h3>
                <div class="flex items-baseline justify-center space-x-1">
                    <p id="display-yt" class="text-3xl font-bold text-gray-800">29</p>
                    <p class="text-gray-400 text-sm font-bold">/ 50</p>
                </div>
                <p id="note-yt" class="text-[10px] text-red-500 mt-2 font-bold uppercase tracking-tighter italic">...</p>
            </div>

            <!-- Countdown -->
            <div class="glass-card p-6 rounded-3xl shadow-sm border-t-4 border-amber-500">
                <h3 class="text-gray-500 text-xs mb-1 font-medium italic tracking-tight uppercase">‡∏ã‡πâ‡∏≠‡∏°‡∏¢‡πà‡∏≠‡∏¢ 23 ‡∏Å.‡∏û. 69</h3>
                <p class="text-3xl font-bold text-gray-800 tracking-tight">25 <span class="text-sm text-gray-400 font-medium">‡∏ß‡∏±‡∏ô</span></p>
                <p class="text-[10px] text-amber-600 mt-2 font-bold uppercase tracking-widest italic font-light italic font-light italic font-light italic font-light">Target 100% Ready</p>
            </div>

            <!-- Keyring Inventory -->
            <div class="glass-card p-6 rounded-3xl shadow-sm border-t-4 border-emerald-600">
                <h3 class="text-gray-500 text-xs mb-1 font-medium italic tracking-tight uppercase">‡∏û‡∏ß‡∏á‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏•‡∏∂‡∏Å</h3>
                <p id="keyring-status-display" class="text-xl font-bold text-gray-800 uppercase tracking-tighter italic font-light">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï</p>
                <p id="display-keyring-percent" class="text-[10px] font-bold text-emerald-600 uppercase tracking-widest">0%</p>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Left: IT Detailed Status -->
            <div class="lg:col-span-2 space-y-6">
                <div class="glass-card p-8 rounded-[2rem] shadow-sm border-l-[12px] border-indigo-950">
                    <h2 class="text-2xl font-bold text-indigo-950 mb-8 border-b border-indigo-50 pb-4 flex items-center tracking-tight">
                        <i class="fas fa-check-double mr-3 text-indigo-600"></i> ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏• ‡∏Å‡∏Ñ‡∏ó.
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="p-6 rounded-3xl bg-indigo-50 border border-indigo-100 flex items-center shadow-sm">
                            <div class="bg-emerald-500 text-white w-12 h-12 rounded-full flex items-center justify-center mr-4 shadow-lg">
                                <i class="fas fa-qrcode text-lg"></i>
                            </div>
                            <div>
                                <h4 class="text-sm font-bold text-indigo-900 uppercase tracking-tight italic font-light font-bold">‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á 100.-</h4>
                                <p class="text-[10px] text-emerald-600 font-bold uppercase italic font-light italic font-light">‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå</p>
                            </div>
                        </div>
                        <div id="box-ai" class="p-6 rounded-3xl bg-white border border-gray-100 flex items-center shadow-sm transition-all">
                            <div id="icon-ai" class="bg-indigo-500 text-white w-12 h-12 rounded-full flex items-center justify-center mr-4 shadow-lg">
                                <i class="fas fa-robot text-lg"></i>
                            </div>
                            <div>
                                <h4 class="text-sm font-bold text-gray-800 uppercase tracking-tight italic font-light font-bold">AI ‡∏ô‡πâ‡∏≠‡∏á‡∏à‡∏≤‡∏ô‡∏î‡∏≤‡∏ß</h4>
                                <p id="status-ai" class="text-[10px] font-bold text-gray-400 italic italic font-light italic font-light">...</p>
                            </div>
                        </div>
                        <div id="box-lucky" class="p-6 rounded-3xl bg-white border border-gray-100 flex items-center shadow-sm transition-all">
                            <div id="icon-lucky" class="bg-amber-500 text-white w-12 h-12 rounded-full flex items-center justify-center mr-4 shadow-lg">
                                <i class="fas fa-random text-lg"></i>
                            </div>
                            <div>
                                <h4 class="text-sm font-bold text-gray-800 uppercase tracking-tight italic font-light font-bold">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏ö‡∏™‡∏•‡∏≤‡∏Å‡∏™‡∏∏‡πà‡∏°</h4>
                                <p id="status-lucky" class="text-[10px] font-bold text-gray-400 italic italic font-light italic font-light">...</p>
                            </div>
                        </div>
                        <div class="p-6 rounded-3xl bg-white border border-gray-100 flex items-center shadow-sm opacity-60">
                            <div class="bg-red-400 text-white w-12 h-12 rounded-full flex items-center justify-center mr-4 shadow-lg">
                                <i class="fas fa-video text-lg"></i>
                            </div>
                            <div>
                                <h4 class="text-sm font-bold text-gray-800 uppercase tracking-tight font-bold italic">Live Streaming</h4>
                                <p class="text-[10px] font-bold text-gray-400 italic italic font-light italic font-light">‡∏£‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡∏ä‡πà‡∏≠‡∏á</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right: URGENT ACTION & LOGISTICS -->
            <div class="space-y-6">
                <!-- REDESIGNED URGENT BOX -->
                <div id="urgent-box" class="bg-red-600 text-white p-6 rounded-[2.5rem] shadow-2xl relative overflow-hidden urgent-glow">
                    <div class="relative z-10">
                        <div class="flex items-center space-x-3 mb-6">
                            <i class="fas fa-fire-alt text-2xl text-yellow-300 shake-icon"></i>
                            <h2 class="text-xl font-bold tracking-widest uppercase">‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô</h2>
                        </div>
                        <ul id="urgent-list" class="space-y-4"></ul>
                        <div id="empty-urgent" class="hidden py-10 text-center italic text-red-200">
                            <i class="fas fa-check-circle text-3xl mb-3 block"></i>
                            <span class="text-sm font-bold uppercase tracking-widest">‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢</span>
                        </div>
                    </div>
                </div>

                <div class="glass-card p-8 rounded-[2.5rem] shadow-sm border-b-[10px] border-orange-500">
                    <h2 class="text-lg font-bold text-gray-800 mb-8 flex items-center italic">
                        <i class="fas fa-store-alt mr-3 text-orange-600"></i> ‡∏ã‡∏∏‡πâ‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£ & ‡∏ï‡∏•‡∏≤‡∏î‡∏û‡∏≠‡πÄ‡∏û‡∏µ‡∏¢‡∏á
                    </h2>
                    <div class="space-y-7">
                        <div class="flex items-start" id="item-food">
                            <div id="dot-food" class="w-3.5 h-3.5 rounded-full mt-1.5 mr-4 shadow-lg"></div>
                            <div>
                                <h4 class="text-sm font-bold text-gray-800 uppercase tracking-tight">‡∏õ‡∏•‡∏≤‡πÄ‡∏´‡πá‡∏î (‡∏≠‡∏≤‡∏´‡∏≤‡∏£)</h4>
                                <p id="status-food" class="text-[10px] font-bold italic tracking-tighter uppercase italic">...</p>
                            </div>
                        </div>
                        <div class="flex items-start" id="item-secondhand">
                            <div id="dot-secondhand" class="w-3.5 h-3.5 rounded-full mt-1.5 mr-4 shadow-lg"></div>
                            <div>
                                <h4 class="text-sm font-bold text-gray-800 uppercase tracking-tight italic font-light italic font-light">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏°‡∏∑‡∏≠‡∏™‡∏≠‡∏á‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏•</h4>
                                <p id="status-secondhand" class="text-[10px] font-bold italic tracking-tighter uppercase italic">...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer class="mt-14 text-center">
            <div class="inline-block px-8 py-3 bg-indigo-950 text-indigo-300 rounded-full text-[9px] font-bold uppercase tracking-[0.5em] shadow-lg italic">
                ‡∏Å‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πà‡∏ß‡∏°‡∏°‡∏∑‡∏≠‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏• (‡∏Å‡∏Ñ‡∏ó.) | ‡∏®‡∏ó‡∏ó. 36th ANNIV
            </div>
        </footer>
    </main>

    <script>
        // ‡πÉ‡∏ä‡πâ Key ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Local Storage
        const STORAGE_KEY = 'MTC_STABLE_SAVE_V110';
        
        // ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
        const DEFAULT_STATE = {
            ytSubs: 29, 
            foodStatus: 'waiting',
            secondhandStatus: 'waiting',
            aiStatus: 'ongoing',
            luckyStatus: 'waiting',
            keyringProg: 60,
            lastSaved: '‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å'
        };

        let dashboardState = {};

        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°
        function loadApplication() {
            try {
                const stored = localStorage.getItem(STORAGE_KEY);
                if (stored) {
                    dashboardState = JSON.parse(stored);
                } else {
                    dashboardState = {...DEFAULT_STATE};
                    localStorage.setItem(STORAGE_KEY, JSON.stringify(dashboardState));
                }
            } catch (e) {
                console.error("Local Storage Load Failed", e);
                dashboardState = {...DEFAULT_STATE};
            }
            
            // ‡∏ß‡∏≤‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
            refreshUI();
            
            // ‡πÄ‡∏ï‡∏¥‡∏°‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Admin
            syncInputs();
        }

        // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°
        function calculateOverall() {
            let score = 0;
            const statusMap = (s) => (s === 'done' ? 100 : (s === 'ongoing' ? 50 : 0));

            score += 100 * 0.05; // ‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á (5%)
            score += Math.min(100, (dashboardState.ytSubs / 50) * 100) * 0.20; // YouTube (20%)
            score += statusMap(dashboardState.aiStatus) * 0.15; // AI (15%)
            score += statusMap(dashboardState.luckyStatus) * 0.15; // Lucky (15%)
            score += statusMap(dashboardState.foodStatus) * 0.15; // Food (15%)
            score += statusMap(dashboardState.secondhandStatus) * 0.15; // SH (15%)
            score += dashboardState.keyringProg * 0.15; // Keyring (15%)

            return Math.round(score);
        }

        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        function saveAndSync() {
            // ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏à‡∏≤‡∏Å Input
            const newState = {
                ytSubs: parseInt(document.getElementById('in-yt').value) || 0,
                foodStatus: document.getElementById('in-food').value,
                secondhandStatus: document.getElementById('in-secondhand').value,
                aiStatus: document.getElementById('in-ai').value,
                luckyStatus: document.getElementById('in-lucky').value,
                keyringProg: parseInt(document.getElementById('in-keyring-prog').value) || 0,
                lastSaved: new Date().toLocaleTimeString('th-TH')
            };

            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ñ‡∏≤‡∏ß‡∏£
            dashboardState = newState;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(dashboardState));
            
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
            refreshUI();
            
            // ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
            const toast = document.createElement('div');
            toast.className = 'fixed top-24 left-1/2 -translate-x-1/2 bg-emerald-600 text-white px-8 py-3 rounded-full shadow-2xl z-[100] font-bold text-sm animate-bounce';
            toast.innerText = '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!';
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
                toggleAdmin(); // ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
            }, 1000);
        }

        // ‡∏ß‡∏≤‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ UI
        function refreshUI() {
            const overall = calculateOverall();
            
            // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Error ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Ñ‡∏Å‡∏≤‡∏£‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏≠‡∏á Element (Defensive Check)
            const safeSetText = (id, text) => {
                const el = document.getElementById(id);
                if (el) el.innerText = text;
            };

            const safeSetWidth = (id, width) => {
                const el = document.getElementById(id);
                if (el) el.style.width = width + '%';
            };

            safeSetText('display-progress', overall + '%');
            safeSetWidth('bar-progress', overall);
            safeSetText('display-yt', dashboardState.ytSubs);
            
            const remaining = 50 - dashboardState.ytSubs;
            const badgeYt = document.getElementById('badge-yt');
            const noteYt = document.getElementById('note-yt');
            
            if (badgeYt && noteYt) {
                if (remaining <= 0) {
                    badgeYt.innerText = "‡∏û‡∏£‡πâ‡∏≠‡∏°";
                    badgeYt.className = "text-[10px] font-bold uppercase bg-emerald-100 text-emerald-700 px-2 py-1 rounded";
                    noteYt.innerText = "‡∏ä‡πà‡∏≠‡∏á‡∏û‡∏£‡πâ‡∏≠‡∏° LIVE";
                } else {
                    badgeYt.innerText = "‡∏ß‡∏¥‡∏Å‡∏§‡∏ï";
                    badgeYt.className = "text-[10px] font-bold uppercase bg-red-100 text-red-700 px-2 py-1 rounded";
                    noteYt.innerText = `* ‡∏Ç‡∏≤‡∏î‡∏≠‡∏µ‡∏Å ${remaining} SUBS`;
                }
            }

            safeSetText('display-keyring-percent', dashboardState.keyringProg + '%');
            safeSetText('keyring-status-display', (dashboardState.keyringProg >= 100 ? '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô' : '‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£'));

            // ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•
            updateTaskUI('ai', dashboardState.aiStatus);
            updateTaskUI('lucky', dashboardState.luckyStatus);
            
            // ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏ã‡∏∏‡πâ‡∏°
            updateSmallStatus('food', dashboardState.foodStatus, '‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ô‡πÅ‡∏°‡πà‡∏Ñ‡∏£‡∏±‡∏ß');
            updateSmallStatus('secondhand', dashboardState.secondhandStatus, '‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á');

            // ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô
            buildUrgentList(remaining);

            // ‡πÅ‡∏™‡∏î‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• JSON
            safeSetText('raw-json-viewer', JSON.stringify(dashboardState, null, 4));
            safeSetText('last-saved-time', "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠: " + dashboardState.lastSaved);
        }

        function updateTaskUI(id, s) {
            const t = document.getElementById(`status-${id}`);
            const i = document.getElementById(`icon-${id}`);
            if (!t || !i) return;

            t.innerText = s === 'done' ? '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô' : (s === 'ongoing' ? '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£' : '‡∏£‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•');
            i.className = s === 'done' ? 'bg-emerald-500 text-white w-12 h-12 rounded-full flex items-center justify-center mr-4 shadow-lg' : 'bg-indigo-500 text-white w-12 h-12 rounded-full flex items-center justify-center mr-4 shadow-lg';
            i.innerHTML = s === 'done' ? '<i class="fas fa-check"></i>' : '<i class="fas fa-spinner fa-spin"></i>';
            if (s === 'waiting') i.className = 'bg-amber-500 text-white w-12 h-12 rounded-full flex items-center justify-center mr-4 shadow-lg';
        }

        function updateSmallStatus(id, s, label) {
            const t = document.getElementById(`status-${id}`);
            const d = document.getElementById(`dot-${id}`);
            if (!t || !d) return;

            if (s === 'waiting') {
                t.innerText = `‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà${label}`;
                t.className = 'text-[10px] font-bold text-red-500 italic uppercase font-light';
                d.className = 'w-3.5 h-3.5 rounded-full mt-1.5 mr-4 bg-red-500 animate-pulse';
            } else if (s === 'ongoing') {
                t.innerText = '‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£...';
                t.className = 'text-[10px] font-bold text-indigo-500 italic uppercase font-light';
                d.className = 'w-3.5 h-3.5 rounded-full mt-1.5 mr-4 bg-indigo-500';
            } else {
                t.innerText = '‡πÄ‡∏™‡∏£‡πá‡∏à‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢';
                t.className = 'text-[10px] font-bold text-emerald-600 italic uppercase font-light';
                d.className = 'w-3.5 h-3.5 rounded-full mt-1.5 mr-4 bg-emerald-500';
            }
        }

        function buildUrgentList(rem) {
            const list = document.getElementById('urgent-list');
            const empty = document.getElementById('empty-urgent');
            const box = document.getElementById('urgent-box');
            if (!list || !empty || !box) return;

            let items = [];
            if (dashboardState.foodStatus === 'waiting') items.push('‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ô‡πÅ‡∏°‡πà‡∏Ñ‡∏£‡∏±‡∏ß (‡∏õ‡∏•‡∏≤‡πÄ‡∏´‡πá‡∏î)');
            if (rem > 0) items.push(`‡∏£‡∏∞‡∏î‡∏°‡∏¢‡∏≠‡∏î YouTube (‡∏Ç‡∏≤‡∏î ${rem} Subs)`);
            if (dashboardState.secondhandStatus === 'waiting') items.push('‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏°‡∏∑‡∏≠‡∏™‡∏≠‡∏á');
            if (dashboardState.luckyStatus === 'waiting') items.push('‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏• (‡∏Å‡∏ò‡∏Å.)');

            if (items.length === 0) {
                list.classList.add('hidden');
                empty.classList.remove('hidden');
                box.classList.replace('bg-red-600', 'bg-emerald-600');
            } else {
                list.innerHTML = items.map(t => `<li class="bg-red-900/40 p-3 rounded-2xl border border-red-400/30 flex items-center text-[10px] font-bold uppercase"><i class="fas fa-bolt text-yellow-300 mr-2"></i> ${t}</li>`).join('');
                list.classList.remove('hidden');
                empty.classList.add('hidden');
                box.classList.replace('bg-emerald-600', 'bg-red-600');
            }
        }

        function syncInputs() {
            const ids = ['in-yt', 'in-food', 'in-secondhand', 'in-ai', 'in-lucky', 'in-keyring-prog'];
            ids.forEach(id => {
                const el = document.getElementById(id);
                if (!el) return;
                
                if (id === 'in-yt') el.value = dashboardState.ytSubs;
                else if (id === 'in-food') el.value = dashboardState.foodStatus;
                else if (id === 'in-secondhand') el.value = dashboardState.secondhandStatus;
                else if (id === 'in-ai') el.value = dashboardState.aiStatus;
                else if (id === 'in-lucky') el.value = dashboardState.luckyStatus;
                else if (id === 'in-keyring-prog') {
                    el.value = dashboardState.keyringProg;
                    const valEl = document.getElementById('in-keyring-val');
                    if (valEl) valEl.innerText = dashboardState.keyringProg;
                }
            });
        }

        function toggleAdmin() {
            const p = document.getElementById('admin-panel');
            const b = document.getElementById('btn-admin');
            const m = document.getElementById('mode-display');
            if (!p || !b || !m) return;

            if (p.classList.contains('hidden')) {
                p.classList.remove('hidden');
                b.innerHTML = '<i class="fas fa-eye mr-2"></i> ‡∏Å‡∏•‡∏±‡∏ö Dashboard';
                b.classList.replace('bg-indigo-600', 'bg-slate-700');
                m.innerText = '‡πÇ‡∏´‡∏°‡∏î‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Admin)';
                syncInputs();
            } else {
                p.classList.add('hidden');
                b.innerHTML = '<i class="fas fa-database mr-2"></i> ‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà';
                b.classList.replace('bg-slate-700', 'bg-indigo-600');
                m.innerText = '‡∏°‡∏∏‡∏°‡∏°‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏≤';
            }
        }

        function resetToDefaults() {
            if (confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                localStorage.removeItem(STORAGE_KEY);
                location.reload();
            }
        }

        document.getElementById('in-keyring-prog').addEventListener('input', (e) => {
            const valEl = document.getElementById('in-keyring-val');
            if (valEl) valEl.innerText = e.target.value;
        });

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏´‡∏•‡∏î
        window.onload = loadApplication;
    </script>
</body>
</html>